field x: Ref
inline predicate has_x(r: Ref) {
    acc(r.x)
}

inline predicate has_x2(r: Ref) {
    acc(has_x(r), 1/2) && has_x(unfolding acc(has_x(r), 1/2) in r.x)
}

function test(r: Ref): Ref
requires acc(has_x2(r), wildcard) {
    unfolding acc(has_x2(r), wildcard) in
    unfolding acc(has_x(r), wildcard) in
    unfolding acc(has_x(r.x), wildcard) in
    r.x.x
}